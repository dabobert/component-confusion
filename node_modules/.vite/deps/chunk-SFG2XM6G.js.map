{
  "version": 3,
  "sources": ["../../@vidstack/react/dist/dev/chunks/vidstack-WCJccVAs.js"],
  "sourcesContent": ["\"use client\"\n\nimport { l as listen, d as IS_CHROME, e as IS_IOS, f as canGoogleCastSrc, g as coerceToError, I as IS_SERVER, h as loadScript } from './vidstack-BBPG_wWY.js';\nimport { p as peek, D as DOMEvent } from './vidstack-DXuea2hX.js';\n\nfunction getCastFrameworkURL() {\n  return \"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1\";\n}\nfunction hasLoadedCastFramework() {\n  return !!window.cast?.framework;\n}\nfunction isCastAvailable() {\n  return !!window.chrome?.cast?.isAvailable;\n}\nfunction isCastConnected() {\n  return getCastContext().getCastState() === cast.framework.CastState.CONNECTED;\n}\nfunction getCastContext() {\n  return window.cast.framework.CastContext.getInstance();\n}\nfunction getCastSession() {\n  return getCastContext().getCurrentSession();\n}\nfunction getCastSessionMedia() {\n  return getCastSession()?.getSessionObj().media[0];\n}\nfunction hasActiveCastSession(src) {\n  const contentId = getCastSessionMedia()?.media.contentId;\n  return contentId === src?.src;\n}\nfunction getDefaultCastOptions() {\n  return {\n    language: \"en-US\",\n    autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,\n    receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n    resumeSavedSession: true,\n    androidReceiverCompatible: true\n  };\n}\nfunction getCastErrorMessage(code) {\n  const defaultMessage = `Google Cast Error Code: ${code}`;\n  {\n    switch (code) {\n      case chrome.cast.ErrorCode.API_NOT_INITIALIZED:\n        return \"The API is not initialized.\";\n      case chrome.cast.ErrorCode.CANCEL:\n        return \"The operation was canceled by the user\";\n      case chrome.cast.ErrorCode.CHANNEL_ERROR:\n        return \"A channel to the receiver is not available.\";\n      case chrome.cast.ErrorCode.EXTENSION_MISSING:\n        return \"The Cast extension is not available.\";\n      case chrome.cast.ErrorCode.INVALID_PARAMETER:\n        return \"The parameters to the operation were not valid.\";\n      case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:\n        return \"No receiver was compatible with the session request.\";\n      case chrome.cast.ErrorCode.SESSION_ERROR:\n        return \"A session could not be created, or a session was invalid.\";\n      case chrome.cast.ErrorCode.TIMEOUT:\n        return \"The operation timed out.\";\n      default:\n        return defaultMessage;\n    }\n  }\n}\nfunction listenCastContextEvent(type, handler) {\n  return listen(getCastContext(), type, handler);\n}\n\nclass GoogleCastLoader {\n  constructor() {\n    this.name = \"google-cast\";\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastContext}\n   */\n  get cast() {\n    return getCastContext();\n  }\n  mediaType() {\n    return \"video\";\n  }\n  canPlay(src) {\n    return IS_CHROME && !IS_IOS && canGoogleCastSrc(src);\n  }\n  async prompt(ctx) {\n    let openEvent;\n    try {\n      const loadEvent = await this._loadCastFramework(ctx);\n      if (!this._player) {\n        this._player = new cast.framework.RemotePlayer();\n        new cast.framework.RemotePlayerController(this._player);\n      }\n      openEvent = ctx.player.createEvent(\"google-cast-prompt-open\", {\n        trigger: loadEvent\n      });\n      ctx.player.dispatchEvent(openEvent);\n      this._notifyRemoteStateChange(ctx, \"connecting\", openEvent);\n      await this._showPrompt(peek(ctx.$props.googleCast));\n      ctx.$state.remotePlaybackInfo.set({\n        deviceName: getCastSession()?.getCastDevice().friendlyName\n      });\n      if (isCastConnected())\n        this._notifyRemoteStateChange(ctx, \"connected\", openEvent);\n    } catch (message) {\n      const error = coerceToError(message);\n      this._notifyRemoteStateChange(\n        ctx,\n        isCastConnected() ? \"connected\" : \"disconnected\",\n        new DOMEvent(\"google-cast-prompt-error\", { detail: error })\n      );\n      throw error;\n    } finally {\n      ctx.player.dispatch(\"google-cast-prompt-close\", {\n        trigger: openEvent\n      });\n    }\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load google cast provider server-side\");\n    }\n    if (!this._player) {\n      throw Error(\"[vidstack] google cast player was not initialized\");\n    }\n    return new (await import('./vidstack-Bc2saqZ1.js')).GoogleCastProvider(this._player, ctx);\n  }\n  async _loadCastFramework(ctx) {\n    if (hasLoadedCastFramework())\n      return;\n    const loadStartEvent = ctx.player.createEvent(\"google-cast-load-start\");\n    ctx.player.dispatch(loadStartEvent);\n    await loadScript(getCastFrameworkURL());\n    await customElements.whenDefined(\"google-cast-launcher\");\n    const loadedEvent = ctx.player.createEvent(\"google-cast-loaded\", { trigger: loadStartEvent });\n    ctx.player.dispatch(loadedEvent);\n    if (!isCastAvailable()) {\n      throw Error(\n        \"Google Cast is not available on this platform.\" \n      );\n    }\n    return loadedEvent;\n  }\n  async _showPrompt(options) {\n    this._setOptions(options);\n    const errorCode = await this.cast.requestSession();\n    if (errorCode)\n      throw Error(getCastErrorMessage(errorCode));\n  }\n  _setOptions(options) {\n    this.cast?.setOptions({\n      ...getDefaultCastOptions(),\n      ...options\n    });\n  }\n  _notifyRemoteStateChange(ctx, state, trigger) {\n    const detail = { type: \"google-cast\", state };\n    ctx.delegate._notify(\"remote-playback-change\", detail, trigger);\n  }\n}\n\nvar loader = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  GoogleCastLoader: GoogleCastLoader\n});\n\nexport { getCastContext as a, getCastSession as b, getCastErrorMessage as c, loader as d, getCastSessionMedia as g, hasActiveCastSession as h, listenCastContextEvent as l };\n"],
  "mappings": "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",
  "names": []
}
